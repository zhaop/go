# Update CFILES & run make depend whenever files are added/removed
# 
# Greatly inspired by Prof Ronan Boulic from CS101@EPFL

# Compiler
CC      = gcc

# Include directory
INCLUDE = .

# Compiler flags (-O3 to optimize, -g to debug, -pg or -ftest-coverage -fprofile-arcs to profile)
CFLAGS  = -Wall -Wextra -I${INCLUDE} -O3

# Libraries
LIBS    = -lm -L/usr/lib

# Source code to compile
CFILES  = main.c go.c players.c utils.c players/human.c players/randy.c players/karl.c
CPPFILES = 

# Object files (generated using CFILES)
OFILES  = $(CFILES:.c=.o)

# Target file name
TARGET  = go.x

# Link objects into executable file
$(TARGET): $(OFILES)
	$(CC) $(OFILES) $(CFLAGS) ${LIBS} -o $(TARGET)


# Special targets:
# "make depend" : generate list of dependencies
# "make clean"  : delete *.o *.x files

depend:
	@echo "Generating dependencies..."
	@(sed '/^# DO NOT DELETE THIS LINE/q' Makefile && \
	  $(CC) -MM $(CFLAGS) $(CFILES) | \
	  egrep -v "/usr/include" \
	 ) >Makefile.new
	@mv Makefile.new Makefile
	@echo "Done."

clean:
	@echo "Deleting graphs, object files and executables..."
	@find . -name "*.o" -type f -delete
	@find . -name "*.x" -type f -delete
	@find . -name "DISABLEgraph*.o" -type f -delete
	@echo "Done."

#
# -- Dependencies generated by "make depend"
#####################################################
# DO NOT DELETE THIS LINE
main.o: main.c go.h players.h players/randy.h players.h utils.h
go.o: go.c go.h rand.h utils.h
players.o: players.c players.h go.h utils.h
utils.o: utils.c utils.h
human.o: players/human.c players/human.h players.h go.h
randy.o: players/randy.c players/randy.h players.h go.h go.h
karl.o: players/karl.c players/karl.h players.h go.h utils.h
